import{I as v,K as c,L as l,N as p,P as g,U as h}from"./chunk-PLBYIIK4.js";import{$ as f,H as m,ea as u,fa as b,t as d,x as o,y as n}from"./chunk-5KWSUYNW.js";var y=class s{constructor(r){this.firestore=r}authService=b(h);filterOptions=[{value:"all",label:"All"},{value:"completed",label:"Completed"},{value:"in-progress",label:"In Progress"},{value:"not-started",label:"Not Started"}];getTrack(r){let e=g(this.firestore,"tracksData",r);return l(e).pipe(o(t=>{if(!t)throw new Error("Track not found");return t}),m(t=>(console.error("Error loading track:",t),d(null))))}getAllTracks(){let r=p(this.firestore,"tracksData");return c(r,{idField:"id"})}getAllRoadmaps(){let r=p(this.firestore,"roadmaps");return c(r,{idField:"id"})}getRoadmapById(r){let e=g(this.firestore,`roadmaps/${r}`);return l(e,{idField:"id"})}getTrackWithProgress(r,e){return n([this.getTrack(r),this.authService.getUserProgress(e)]).pipe(o(([t,a])=>{let i=a.trackProgress[r]||{completed:0,total:t.pathCards.reduce((k,P)=>k+(P.progress?.total||0),0)};return{track:t,progress:i}}))}getRoadmapWithProgress(r,e){return n([this.getRoadmapById(r),this.authService.getUserProgress(e)]).pipe(o(([t,a])=>{let i=a.roadmapProgress?.[r]||{completedSteps:[],inProgressSteps:[]};return{roadmap:t,progress:i}}))}static \u0275fac=function(e){return new(e||s)(u(v))};static \u0275prov=f({token:s,factory:s.\u0275fac,providedIn:"root"})};export{y as a};
